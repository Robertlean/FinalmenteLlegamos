<!DOCTYPE html>
<html lang="es">
  <%- include('partials/head') %>
  
  <body>
    <%- include('partials/header') %>

    <%- include("partials/nav.ejs") %> 

    <div class="container">
      <section class="login">
        <div class="row productos">
          <div class="titulo col-12">

            <h2><%= title %></h2>

          </div>
          <div class="col-12">
            <div class="contenido">
              <div class="row py-3 px-5">
                <div class="col-12 col-md-5 col-lg-6 col-xl-4 d-flex flex-column justify-content-center">
                  <figure>
                  <img id="vistaPrevia" src="" alt="" class="w-75"/>
                  </figure>
                </div>
                <div class="col-12 col-md-7 col-lg-6 col-xl-8 ">
                  <form action="/productos/agregar" method="POST" enctype="multipart/form-data" id="productAdd">

                    <div class="form-row">

                      <div class="form-group col-12 col-xl-6">
                        <label for="Nombre del producto"></label>
                        <input type="text"
                        class="form-control <%= (typeof old != 'undefined' && old.nombre)?"is-valid":(typeof errors != 'undefined' && errors.nombre)?"is-invalid": ""  %>"
                        id="inputNombre"  name="nombre"  value="<%= (typeof old != 'undefined' && old.nombre)?old.nombre:'' %>" placeholder="nombre del producto"/>
                        <small id="errorNombre" class="text-danger"><%= (typeof errors != 'undefined' && errors.nombre)?errors.nombre.msg: "" %> </small>
                      </div>

                      <div class="form-group col-12 col-xl-6">
                        <label for="Titulo"></label>
                        <select name="categoria" id="inputCategoria" class="form-control <%= (typeof old != 'undefined' && old.categoria)?"is-valid":(typeof errors != 'undefined' && errors.categoria)?"is-invalid": ""  %>">
                          <option value="">Eligí la categoría</option>
                          <% if (typeof old != 'undefined' && old.categoria) { %>
                              <option value="<%= old.categoria.id_categorias %> " selected><%= old.categoria.nombre %> </option>
                          <% } %>
                          
                          <% categorias.forEach(categoria => { %>
                              <option value="<%= categoria.id_categorias %>"><%= categoria.nombre %> </option>
                          <% }) %>>
                        </select>
                        <small id="errorCategoria" class="text-danger"><%= (typeof errors != 'undefined' && errors.categoria)?errors.categoria.msg: "" %> </small>
                      </div>

                    </div>

                
                    <div class="form-row">
                      <div class="form-group col-12 col-xl-6">
                        <label for="precio"></label>
                        <input type="number"
                        class="form-control <%= (typeof old != 'undefined' && old.precio && !errors.precio)?"is-valid":(typeof errors != 'undefined' && errors.precio)?"is-invalid": ""  %>"
                        id="inputPrecio" value="<%= (typeof old != 'undefined' && old.precio)?old.precio:'' %>" placeholder="precio" name="precio" min=1 />
                        <small id="errorPrecio" class="text-danger"><%= (typeof errors != 'undefined' && errors.precio)?errors.precio.msg: "" %> </small>
                      </div>

                      <div class="form-group col-12 col-xl-6">
                        <label for="stock"></label> 
                        <input type="number"
                        class="form-control <%= (typeof old != 'undefined' && old.stock && !errors.stock)?"is-valid":(typeof errors != 'undefined' && errors.stock)?"is-invalid": ""  %>"
                        id="inputStock" value="<%= (typeof old != 'undefined' && old.stock)?old.stock:'' %>" placeholder="stock" name="stock" min=1 />
                        <small class="text-danger" id="errorStock"><%= (typeof errors != 'undefined' && errors.stock)?errors.stock.msg: "" %> </small>
                      </div>

                      <div class="form-group col-12 col-xl-6">
                        <label for="cantidad"></label> <!--  -->
                        <input type="number"
                        class="form-control <%= (typeof old != 'undefined' && old.cantidad && !errors.cantidad)?"is-valid":(typeof errors != 'undefined' && errors.cantidad)?"is-invalid": ""  %>"
                        id="inputCantidad" value="<%= (typeof old != 'undefined' && old.cantidad)?old.cantidad:'' %>" placeholder="cantidad" name="cantidad" min=1 />
                        <small class="text-danger" id="errorCantidad"><%= (typeof errors != 'undefined' && errors.cantidad)?errors.cantidad.msg: "" %> </small>
                      </div>

                      <div class="form-group col-12">
                        <label for="descripcion"></label>
                        <textarea name="descripcion" id="descripcion" cols="10" rows="5" class="form-control <%= (typeof old != 'undefined' && old.descripcion && !errors.descripcion)?"is-valid":(typeof errors != 'undefined' && errors.descripcion)?"is-invalid": ""  %>"><%= (typeof old != 'undefined' && old.descripcion)?old.descripcion:'' %></textarea>        
                        <small id="errorDescripcion" class="text-danger"><%= (typeof errors != 'undefined' && errors.descripcion)?errors.descripcion.msg: "" %> </small>
                      </div>
                    </div>
                 
                    <div class="form-row">
                        <div class="form-group col-12 col-xl-6">
                            <div class="custom-file">
                              <input type="file" class="custom-file-input " id="inputAvatar" lang="en" name="imagen">
                              <label class="custom-file-label" for="customFileLang">Imagenes</label>
                              <small id="errorAvatar" class="text-danger"><%= (typeof errors != 'undefined' && errors.errorAvatar)?errors.errorAvatar.msg: "" %> </small>
                            </div>
                          </div>
                        <div class="col-12 col-xl-6">
                          <button type="submit" class="btn btn-primary">
                            Guardar
                          </button>
                        </div>

                    </div>
                    
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
    
    <%- include('partials/footer') %>
  </body>
</html>
